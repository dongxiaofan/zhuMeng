{"version":3,"file":"canvas.js","sources":["component/l-echart/canvas.js"],"sourcesContent":["import {getDeviceInfo} from './utils';\r\n\r\nconst cacheChart = {}\r\nconst fontSizeReg = /([\\d\\.]+)px/;\r\nclass EventEmit {\n\tconstructor() {\n\t\tthis.__events = {};\n\t}\n\ton(type, listener) {\n\t\tif (!type || !listener) {\n\t\t\treturn;\n\t\t}\n\t\tconst events = this.__events[type] || [];\n\t\tevents.push(listener);\n\t\tthis.__events[type] = events;\n\t}\n\temit(type, e) {\n\t\tif (type.constructor === Object) {\n\t\t\te = type;\n\t\t\ttype = e && e.type;\n\t\t}\n\t\tif (!type) {\n\t\t\treturn;\n\t\t}\n\t\tconst events = this.__events[type];\n\t\tif (!events || !events.length) {\n\t\t\treturn;\n\t\t}\n\t\tevents.forEach((listener) => {\n\t\t\tlistener.call(this, e);\n\t\t});\n\t}\n\toff(type, listener) {\n\t\tconst __events = this.__events;\n\t\tconst events = __events[type];\n\t\tif (!events || !events.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (!listener) {\n\t\t\tdelete __events[type];\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0, len = events.length; i < len; i++) {\n\t\t\tif (events[i] === listener) {\n\t\t\t\tevents.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\r\nclass Image {\r\n\tconstructor() {\r\n\t\tthis.currentSrc = null\r\n\t\tthis.naturalHeight = 0\r\n\t\tthis.naturalWidth = 0\r\n\t\tthis.width = 0\r\n\t\tthis.height = 0\r\n\t\tthis.tagName = 'IMG'\r\n\t}\r\n\tset src(src) {\r\n\t\tthis.currentSrc = src\r\n\t\tuni.getImageInfo({\r\n\t\t\tsrc,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tthis.naturalWidth = this.width = res.width\r\n\t\t\t\tthis.naturalHeight = this.height = res.height\r\n\t\t\t\tthis.onload()\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tthis.onerror()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tget src() {\r\n\t\treturn this.currentSrc\r\n\t}\r\n}\r\nclass OffscreenCanvas {\r\n\tconstructor(ctx, com, canvasId) {\r\n\t\tthis.tagName = 'canvas'\r\n\t\tthis.com = com\r\n\t\tthis.canvasId = canvasId\r\n\t\tthis.ctx = ctx\r\n\t}\r\n\tset width(w) {\r\n\t\tthis.com.offscreenWidth = w\r\n\t}\r\n\tset height(h) {\r\n\t\tthis.com.offscreenHeight = h\r\n\t}\r\n\tget width() {\r\n\t\treturn this.com.offscreenWidth || 0\r\n\t}\r\n\tget height() {\r\n\t\treturn this.com.offscreenHeight || 0\r\n\t}\r\n\tgetContext(type) {\r\n\t\treturn this.ctx\r\n\t}\r\n\tgetImageData() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.com.$nextTick(() => {\r\n\t\t\t\tuni.canvasGetImageData({\r\n\t\t\t\t\tx:0,\r\n\t\t\t\t\ty:0,\r\n\t\t\t\t\twidth: this.com.offscreenWidth,\r\n\t\t\t\t\theight: this.com.offscreenHeight,\r\n\t\t\t\t\tcanvasId: this.canvasId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t},\r\n\t\t\t\t}, this.com)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\nexport class Canvas {\r\n\tconstructor(ctx, com, isNew, canvasNode={}) {\r\n\t\tcacheChart[com.canvasId] = {ctx}\r\n\t\tthis.canvasId = com.canvasId;\r\n\t\tthis.chart = null;\r\n\t\tthis.isNew = isNew\r\n\t\tthis.tagName = 'canvas'\r\n\t\tthis.canvasNode = canvasNode;\r\n\t\tthis.com = com;\r\n\t\tif (!isNew) {\r\n\t\t\tthis._initStyle(ctx)\r\n\t\t}\r\n\t\tthis._initEvent();\r\n\t\tthis._ee = new EventEmit()\r\n\t}\r\n\tgetContext(type) {\r\n\t\tif (type === '2d') {\r\n\t\t\treturn this.ctx;\r\n\t\t}\r\n\t}\r\n\tsetAttribute(key, value) {\r\n\t\tif(key === 'aria-label') {\r\n\t\t\tthis.com['ariaLabel'] = value\r\n\t\t}\r\n\t}\r\n\tsetChart(chart) {\r\n\t\tthis.chart = chart;\r\n\t}\r\n\tcreateOffscreenCanvas(param){\r\n\t\tif(!this.children) {\r\n\t\t\tthis.com.isOffscreenCanvas = true\r\n\t\t\tthis.com.offscreenWidth = param.width||300\r\n\t\t\tthis.com.offscreenHeight = param.height||300\r\n\t\t\tconst com = this.com\r\n\t\t\tconst canvasId = this.com.offscreenCanvasId\r\n\t\t\tconst context = uni.createCanvasContext(canvasId, this.com)\r\n\t\t\tthis._initStyle(context)\r\n\t\t\tthis.children = new OffscreenCanvas(context, com, canvasId)\r\n\t\t} \r\n\t\treturn this.children\r\n\t}\r\n\tappendChild(child) {\r\n\t\tconsole.log('child', child)\r\n\t}\r\n\tdispatchEvent(type, e) {\r\n\t\tif(typeof type == 'object') {\r\n\t\t\tthis._ee.emit(type.type, type);\r\n\t\t} else {\r\n\t\t\tthis._ee.emit(type, e);\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tattachEvent() {\r\n\t}\r\n\tdetachEvent() {\r\n\t}\r\n\taddEventListener(type, listener) {\r\n\t\tthis._ee.on(type, listener)\r\n\t}\r\n\tremoveEventListener(type, listener) {\r\n\t\tthis._ee.off(type, listener)\r\n\t}\r\n\t_initCanvas(zrender, ctx) {\r\n\t\t// zrender.util.getContext = function() {\r\n\t\t// \treturn ctx;\r\n\t\t// };\r\n\t\t// zrender.util.$override('measureText', function(text, font) {\r\n\t\t// \tctx.font = font || '12px sans-serif';\r\n\t\t// \treturn ctx.measureText(text, font);\r\n\t\t// });\r\n\t}\r\n\t_initStyle(ctx, child) {\r\n\t\tconst styles = [\r\n\t\t\t'fillStyle',\r\n\t\t\t'strokeStyle',\r\n\t\t\t'fontSize',\r\n\t\t\t'globalAlpha',\r\n\t\t\t'opacity',\r\n\t\t\t'textAlign',\r\n\t\t\t'textBaseline',\r\n\t\t\t'shadow',\r\n\t\t\t'lineWidth',\r\n\t\t\t'lineCap',\r\n\t\t\t'lineJoin',\r\n\t\t\t'lineDash',\r\n\t\t\t'miterLimit',\r\n\t\t\t// #ifdef H5 || APP\r\n\t\t\t'font',\r\n\t\t\t// #endif\r\n\t\t];\r\n\t\tconst colorReg = /#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])\\b/g;\r\n\t\tstyles.forEach(style => {\r\n\t\t\tObject.defineProperty(ctx, style, {\r\n\t\t\t\tset: value => {\r\n\t\t\t\t\t// #ifdef H5 || APP\r\n\t\t\t\t\tif (style === 'font' && fontSizeReg.test(value)) {\r\n\t\t\t\t\t\tconst match = fontSizeReg.exec(value);\r\n\t\t\t\t\t\tctx.setFontSize(match[1]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (style === 'opacity') {\r\n\t\t\t\t\t\tctx.setGlobalAlpha(value)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style !== 'fillStyle' && style !== 'strokeStyle' || value !== 'none' && value !== null) {\r\n\t\t\t\t\t\t// #ifdef H5 || APP-PLUS || MP-BAIDU\r\n\t\t\t\t\t\tif(typeof value == 'object') {\r\n\t\t\t\t\t\t\tif (value.hasOwnProperty('colorStop') || value.hasOwnProperty('colors')) {\r\n\t\t\t\t\t\t\t\tctx['set' + style.charAt(0).toUpperCase() + style.slice(1)](value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\t\t\t\tif(colorReg.test(value)) {\r\n\t\t\t\t\t\t\tvalue = value.replace(colorReg, '#$1$1$2$2$3$3')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tctx['set' + style.charAt(0).toUpperCase() + style.slice(1)](value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tif(!this.isNew && !child) {\r\n\t\t\tctx.uniDrawImage = ctx.drawImage\r\n\t\t\tctx.drawImage = (...a) => {\r\n\t\t\t\ta[0] = a[0].src\r\n\t\t\t\tctx.uniDrawImage(...a)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!ctx.createRadialGradient) {\r\n\t\t\tctx.createRadialGradient = function() {\r\n\t\t\t\treturn ctx.createCircularGradient(...[...arguments].slice(-3))\r\n\t\t\t};\r\n\t\t}\r\n\t\t// 字节不支持\r\n\t\tif (!ctx.strokeText) {\r\n\t\t\tctx.strokeText = (...a) => {\r\n\t\t\t\tctx.fillText(...a)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// 钉钉不支持 , 鸿蒙是异步\r\n\t\tif (!ctx.measureText || getDeviceInfo().osName == 'harmonyos') {\r\n\t\t\tctx._measureText = ctx.measureText\r\n\t\t\tconst strLen = (str) => {\r\n\t\t\t\tlet len = 0;\r\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\t\t\t\t\tif (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\r\n\t\t\t\t\t\tlen++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlen += 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn len;\r\n\t\t\t}\r\n\t\t\tctx.measureText = (text, font) => {\r\n\t\t\t\tlet fontSize = ctx?.state?.fontSize || 12;\r\n\t\t\t\tif (font) {\r\n\t\t\t\t\tfontSize = parseInt(font.match(/([\\d\\.]+)px/)[1])\r\n\t\t\t\t}\r\n\t\t\t\tfontSize /= 2;\r\n\t\t\t\tlet isBold = fontSize >= 16;\r\n\t\t\t\tconst widthFactor = isBold ? 1.3 : 1;\r\n\t\t\t\t// ctx._measureText(text, (res) => {})\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: strLen(text) * fontSize * widthFactor\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_initEvent(e) {\r\n\t\tthis.event = {};\r\n\t\tconst eventNames = [{\r\n\t\t\twxName: 'touchStart',\r\n\t\t\tecName: 'mousedown'\r\n\t\t}, {\r\n\t\t\twxName: 'touchMove',\r\n\t\t\tecName: 'mousemove'\r\n\t\t}, {\r\n\t\t\twxName: 'touchEnd',\r\n\t\t\tecName: 'mouseup'\r\n\t\t}, {\r\n\t\t\twxName: 'touchEnd',\r\n\t\t\tecName: 'click'\r\n\t\t}];\r\n\r\n\t\teventNames.forEach(name => {\r\n\t\t\tthis.event[name.wxName] = e => {\r\n\t\t\t\tconst touch = e.touches[0];\r\n\t\t\t\tthis.chart.getZr().handler.dispatch(name.ecName, {\r\n\t\t\t\t\tzrX: name.wxName === 'tap' ? touch.clientX : touch.x,\r\n\t\t\t\t\tzrY: name.wxName === 'tap' ? touch.clientY : touch.y\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tset width(w) {\r\n\t\tthis.canvasNode.width = w\r\n\t}\r\n\tset height(h) {\r\n\t\tthis.canvasNode.height = h\r\n\t}\r\n\r\n\tget width() {\r\n\t\treturn this.canvasNode.width || 0\r\n\t}\r\n\tget height() {\r\n\t\treturn this.canvasNode.height || 0\r\n\t}\r\n\tget ctx() {\r\n\t\treturn cacheChart[this.canvasId]['ctx'] || null\r\n\t}\r\n\tset chart(chart) {\r\n\t\tcacheChart[this.canvasId]['chart'] = chart\r\n\t}\r\n\tget chart() {\r\n\t\treturn cacheChart[this.canvasId]['chart'] || null\r\n\t}\r\n}\r\n\r\nexport function dispatch(name, {x,y, wheelDelta}) {\r\n\tthis.dispatch(name, {\r\n\t\tzrX: x,\r\n\t\tzrY: y,\r\n\t\tzrDelta: wheelDelta,\r\n\t\tpreventDefault: () => {},\r\n\t\tstopPropagation: () =>{}\r\n\t});\r\n}\r\nexport function setCanvasCreator(echarts, {canvas, node}) {\r\n\tif(echarts && !echarts.registerPreprocessor) {\r\n\t\treturn console.warn('echarts 版本不对或未传入echarts，vue3请使用esm格式')\r\n\t}\r\n\techarts.registerPreprocessor(option => {\r\n\t\tif (option && option.series) {\r\n\t\t\tif (option.series.length > 0) {\r\n\t\t\t\toption.series.forEach(series => {\r\n\t\t\t\t\tseries.progressive = 0;\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof option.series === 'object') {\r\n\t\t\t\toption.series.progressive = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tfunction loadImage(src, onload, onerror) {\r\n\t\tlet img = null\r\n\t\tif(node && node.createImage) {\r\n\t\t\timg = node.createImage()\r\n\t\t\timg.onload = onload.bind(img);\r\n\t\t\timg.onerror = onerror.bind(img);\r\n\t\t\timg.src = src;\r\n\t\t\treturn img\r\n\t\t} else {\r\n\t\t\timg = new Image()\r\n\t\t\timg.onload = onload.bind(img)\r\n\t\t\timg.onerror = onerror.bind(img);\r\n\t\t\timg.src = src\r\n\t\t\treturn img\r\n\t\t}\r\n\t}\r\n\tif(echarts.setPlatformAPI) {\r\n\t\techarts.setPlatformAPI({\r\n\t\t\tloadImage: canvas.setChart ? loadImage : null,\r\n\t\t\tcreateCanvas(){\r\n\t\t\t\tconst key = 'createOffscreenCanvas'\r\n\t\t\t\treturn uni.canIUse(key) && uni[key] ? uni[key]({type: '2d'}) : canvas\r\n\t\t\t}\r\n\t\t})\r\n\t} else if(echarts.setCanvasCreator) {\r\n\t\techarts.setCanvasCreator(() => {\r\n\t\t    return canvas;\r\n\t\t});\r\n\t}\r\n\t\r\n}"],"names":["uni","getDeviceInfo","e"],"mappings":"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"}